# "org" ensures this Service is used with the correct Serverless Framework Access Key.
org: nfdevelopment
service: auth-server

provider:
  name: aws
  runtime: nodejs19.x
  region: us-east-1
  timeout: 30
  environment:
    CLIENT_ID: ${self:custom.config.CLIENT_ID}
    CLIENT_SECRET: ${self:custom.config.CLIENT_SECRET}
    CALENDAR_ID: ${self:custom.config.CALENDAR_ID}
 
functions:
  getAuthURL:
    handler: handler.getAuthURL
    events:
      - http:
          path: /auth
          method: get
  getAccessToken:
    handler: handler.getAccessToken
    events:
      - http:
          path: api/token/{code}
          method: get
  getCalendarEvents:
    handler: handler.getCalendarEvents
    events:
      - http:
        path: api/get-events/{access_token}
        method: get
